<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>timer</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="home.css" />
  </head>

  <body>
    <div class="container">
      <nav>
        <div class="logo">
          <i class="fa-solid fa-clock"></i>
          <img src="New folder/TIC Logo_Horizontal_Blue.png" alt="logo" />
        </div>
        <div class="links">
          <ul>
            <li>Home</li>
            <li>History</li>
          </ul>
          <i class="fa-solid fa-circle-user"></i>
          <i class="fa-solid fa-arrow-right-from-bracket"></i>
        </div>
      </nav>
    </div>
    <div class="timer_section">
      <div class="left">
        <div class="times">
          <div class="startstop">
            <div id="system-start-time">Work starts at 9AM</div>
            <label for="workingtime">Working Time:</label>
            <h2 id="working-time">00:00:00</h2>
          </div>
          <div class="break">
            <div id="system-break-time">Break Starts at: 12:00</div>
            <label for="Break-Time">Break Time</label>
            <h2 id="break-time">00:00</h2>
          </div>
        </div>

        <div class="timer_buttons">
          <button id="start">Start</button>
          <button id="break">start break</button>
        </div>
        <div class="paras">
        <p id="fesshift"></p>
        <p id="brkshift"></p>
        <p id="secshift"></p>
      </div>

      <div class="bottom-page">
        <button id="stop-all-timers">signout</button>
      </div>
      </div>
      <div class="right">
        <div class="work-sheet" id="work-sheet">
          <label for="task-of-day"
            >Task of the day <br>
            <textarea rows="3"
              name=""
              id="task"
              placeholder="What did you do today?"
            ></textarea> <br>
          </label>
          <label for="chanllenges"
            >Chanllenge <br>
            <textarea rows="3"
              name=""
              id="chanllenge"
              placeholder="Did data disturb?"
            ></textarea> <br>
          </label>
          <label for="next-steps"
            >Next steps <br>
            <textarea rows="3"
              name=""
              id="next-steps"
              placeholder="What will you do tomorrow?"
            ></textarea>
          </label>
        </div>
      </div>
    </div>
    <div class="bottoms">
      <div class="alertss" id="alertss"></div>
    </div>
    <script>
      const workSheet = document.getElementById("work-sheet");
      const task = document.getElementById("task");
      const chanllenge = document.getElementById("chanllenge");
      const nextSteps = document.getElementById("next-steps");
      const stopAllTimersButton = document.getElementById("stop-all-timers");
      const systemTimeDiv = document.getElementById("system-start-time");
      const systemBreakDiv = document.getElementById("system-break-time");
      const resume = document.getElementById("start");
      const resumes = document.getElementById("break");
      let alertss = document.getElementById("alertss");
      let fesshift = document.getElementById("fesshift");
      let brkshift = document.getElementById("brkshift");
      let secshift = document.getElementById("secshift");
      let shiftCount = 0;
      let counter = 0;
      let workingTime = 0;
      let breakTime = 0;
      let timerInterval;
      const today = new Date();
      const formattedDate = today.toLocaleDateString("en-US");
      console.log(`Today's Date: ${formattedDate}`);

      function updateDisplay() {
        const workingHours = Math.floor(workingTime / 3600)
          .toString()
          .padStart(2, "0");
        const workingMinutes = Math.floor((workingTime % 3600) / 60)
          .toString()
          .padStart(2, "0");
        const workingSeconds = (workingTime % 60).toString().padStart(2, "0");
        document.getElementById(
          "working-time"
        ).textContent = `${workingHours}:${workingMinutes}:${workingSeconds}`;

        const breakHours = Math.floor(breakTime / 3600)
          .toString()
          .padStart(2, "0");
        const breakMinutes = Math.floor((breakTime % 3600) / 60)
          .toString()
          .padStart(2, "0");
        const breakSeconds = (breakTime % 60).toString().padStart(2, "0");
        document.getElementById(
          "break-time"
        ).textContent = `${breakMinutes}:${breakSeconds}`;
      }

      document.getElementById("start").addEventListener("click", () => {
        const now = new Date();
        const hours = now.getHours(); // 0–23
        const minutes = now.getMinutes(); // 0–59
        const seconds = now.getSeconds(); // 0–59
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
          workingTime++;
          updateDisplay();
          systemTimeDiv.textContent = `You started work at: ${hours}:${minutes}:${seconds}`;
        }, 1000);
        shiftCount++;
        console.log(shiftCount);
        if (shiftCount == 1) {
          resume.textContent = "Working..";
          fesshift.textContent = "You are Currently on your first shift";
        }
        if (shiftCount == 2) {
          resume.textContent = "Working..";
          brkshift.textContent = "Your break is Over.";
          secshift.textContent = "You are currently on your second shift";
          return;
        }
      });

      document.getElementById("break").addEventListener("click", () => {
        const now = new Date();
        const hours = now.getHours(); // 0–23
        const minutes = now.getMinutes(); // 0–59
        const seconds = now.getSeconds(); // 0–59
        clearInterval(timerInterval);
        counter++;
        if (counter > 1) {
          alert("You can only go for break once.");
          workingTime++;
          return;
        }
        if (hours !== 12 && minutes < 30) {
          alert("You can only go for break at 12:00.");
          return;
        }
        timerInterval = setInterval(() => {
          breakTime++;
          updateDisplay();
          systemBreakDiv.textContent = `Your break time started at: ${hours}:${minutes}`;
        }, 1000);
        console.log(shiftCount);
        if (shiftCount == 1) {
          resume.textContent = "continue..";
          fesshift.textContent = `Your First Shift is over. at ${hours}:${minutes}`;
          brkshift.textContent = "You Are Currrently on Break";
          return;
        }
      });

      updateDisplay();
      document
        .getElementById("stop-all-timers")
        .addEventListener("click", () => {
          clearInterval(timerInterval);
          workingTime = 0;
          breakTime = 0;
          updateDisplay();
          if (task.value == "" || chanllenge == "" || nextSteps == "") {
            alert("fill all");
            return;
          }
          systemTimeDiv.textContent = "have a blessed evening";
          alert("have a blessed evening");
        });

      document
        .getElementById("stop-all-timers")
        .addEventListener("click", () => {
          workSheet.style.display = "block";
          const taskValue = task.value;
          const chanllengeValue = chanllenge.value;
          const nextStepsValue = nextSteps.value;

          if (taskValue && chanllengeValue && nextStepsValue) {
            alertss.textContent = `Task of the day: ${taskValue}\nChanllenge: ${chanllengeValue}\nNext steps: ${nextStepsValue}`;
            resume.textContent = "start";
            return;
          }
        });
    </script>
  </body>
</html>
